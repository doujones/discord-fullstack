"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=require("downshift"),r=e(require("match-sorter")),a=e(require("react-highlight-words")),l=e(require("react-use/lib/useDeepCompareEffect")),o=require("@chakra-ui/form-control"),i=require("@chakra-ui/layout"),s=require("@chakra-ui/button"),u=require("@chakra-ui/input"),c=require("@chakra-ui/icons"),p=require("@chakra-ui/tag");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return r(e,t,{keys:["value","label"]})}function b(e){return t.createElement(i.Text,null,t.createElement(i.Box,{as:"span"},"Create")," ",t.createElement(i.Box,{as:"span",bg:"yellow.300",fontWeight:"bold"},'"',e,'"'))}exports.CUIAutoComplete=function(e){var r=e.items,d=e.optionFilterFunc,h=void 0===d?m:d,I=e.itemRenderer,f=e.highlightItemBg,y=void 0===f?"gray.100":f,x=e.placeholder,C=e.label,S=e.listStyleProps,v=e.labelStyleProps,P=e.inputStyleProps,E=e.toggleButtonStyleProps,k=e.tagStyleProps,O=e.selectedIconProps,B=e.listItemStyleProps,T=e.onCreateItem,w=e.icon,j=e.hideToggleButton,q=void 0!==j&&j,R=e.disableCreateItem,F=void 0!==R&&R,L=e.createItemRenderer,V=void 0===L?b:L,D=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t.indexOf(n=l[r])>=0||(a[n]=e[n]);return a}(e,["items","optionFilterFunc","itemRenderer","highlightItemBg","placeholder","label","listStyleProps","labelStyleProps","inputStyleProps","toggleButtonStyleProps","tagStyleProps","selectedIconProps","listItemStyleProps","onCreateItem","icon","hideToggleButton","disableCreateItem","createItemRenderer"]),M=t.useState(!1),W=M[0],A=M[1],H=t.useState(""),K=H[0],_=H[1],U=t.useState(r),z=U[0],G=U[1],J=t.useRef(null),N=n.useMultipleSelection(D),Q=N.getSelectedItemProps,X=N.getDropdownProps,Y=N.addSelectedItem,Z=N.removeSelectedItem,$=N.selectedItems,ee=$.map((function(e){return e.value})),te=n.useCombobox({inputValue:K,selectedItem:void 0,items:z,onInputValueChange:function(e){var t=e.selectedItem,n=h(r,e.inputValue||"");W&&n.length>0&&A(!1),t||G(n)},stateReducer:function(e,t){var r=t.changes;switch(t.type){case n.useCombobox.stateChangeTypes.InputBlur:return g({},r,{isOpen:!1});case n.useCombobox.stateChangeTypes.InputKeyDownEnter:case n.useCombobox.stateChangeTypes.ItemClick:return g({},r,{highlightedIndex:e.highlightedIndex,inputValue:K,isOpen:!0});case n.useCombobox.stateChangeTypes.FunctionSelectItem:return g({},r,{inputValue:K});default:return r}},onStateChange:function(e){var t=e.inputValue,a=e.selectedItem;switch(e.type){case n.useCombobox.stateChangeTypes.InputChange:_(t||"");break;case n.useCombobox.stateChangeTypes.InputKeyDownEnter:case n.useCombobox.stateChangeTypes.ItemClick:a&&(ee.includes(a.value)?Z(a):T&&W?(T(a),A(!1),G(r),_("")):Y(a),pe(null))}}}),ne=te.isOpen,re=te.getToggleButtonProps,ae=te.getLabelProps,le=te.getMenuProps,oe=te.getInputProps,ie=te.getComboboxProps,se=te.highlightedIndex,ue=te.getItemProps,ce=te.openMenu,pe=te.selectItem,ge=te.setHighlightedIndex;return t.useEffect((function(){0!==z.length||F||(A(!0),G([{label:""+K,value:K}]),ge(0))}),[z,A,ge,K,F]),l((function(){G(r)}),[r]),t.createElement(i.Stack,null,t.createElement(o.FormLabel,Object.assign({},g({},ae({}),v)),C),$&&t.createElement(i.Stack,{spacing:2,isInline:!0,flexWrap:"wrap"},$.map((function(e,n){return t.createElement(p.Tag,Object.assign({mb:1},k,{key:"selected-item-"+n},Q({selectedItem:e,index:n})),t.createElement(p.TagLabel,null,e.label),t.createElement(p.TagCloseButton,{onClick:function(t){t.stopPropagation(),Z(e)},"aria-label":"Remove menu selection badge"}))}))),t.createElement(i.Stack,Object.assign({isInline:!0},ie()),t.createElement(u.Input,Object.assign({},P,oe(X({placeholder:x,onClick:ne?function(){}:ce,onFocus:ne?function(){}:ce,ref:J})))),!q&&t.createElement(s.Button,Object.assign({},E,re(),{"aria-label":"toggle menu"}),t.createElement(c.ArrowDownIcon,null))),t.createElement(i.Box,{pb:4,mb:4},t.createElement(i.List,Object.assign({bg:"white",borderRadius:"4px",border:ne&&"1px solid rgba(0,0,0,0.1)",boxShadow:"6px 5px 8px rgba(0,50,30,0.02)"},S,le()),ne&&z.map((function(e,n){return t.createElement(i.ListItem,Object.assign({px:2,py:1,borderBottom:"1px solid rgba(0,0,0,0.01)"},B,{bg:se===n?y:"inherit",key:""+e.value+n},ue({item:e,index:n})),W?V(e.label):t.createElement(i.Box,{display:"inline-flex",alignItems:"center"},ee.includes(e.value)&&t.createElement(i.ListIcon,Object.assign({as:w||c.CheckCircleIcon,color:"green.500",role:"img",display:"inline","aria-label":"Selected"},O)),I?I(e):t.createElement(a,{autoEscape:!0,searchWords:[K||""],textToHighlight:(r=e,r.label)})));var r})))))};
//# sourceMappingURL=chakra-ui-autocomplete.cjs.production.min.js.map
